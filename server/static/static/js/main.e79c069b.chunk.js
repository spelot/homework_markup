(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{34:function(e,t,a){e.exports=a(67)},39:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(17),o=a.n(r),i=(a(39),a(13)),s=a(1),l="GO_TO_SETTINGS",u="RUN_BUILD",m="REBUILD",d="School CI server",f="http://localhost:9999/api",p=a(8),v=Object(p.a)(),b=a(4),h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.map((function(t){var a=Object(b.a)(t,2),n=a[0],c=a[1];return"".concat(e,"_").concat(n).concat([void 0,!1,null,""].includes(c)?"":"_".concat(c))})).join(" ")};a(44);var N=function(e){var t=e.className,a=void 0===t?"":t,n=e.modifiers,r=void 0===n?[]:n,o=e.onClick;return c.a.createElement("div",{className:"".concat(a," ").concat("Icon"," ").concat(h("Icon",r)),onClick:o})},E=(a(45),a(6)),y={isInProgress:!1,isAppLoading:!0,isPopupActive:!1},g=function(e){return e.common.isInProgress},O=function(e){return e.common.isAppLoading},x=function(e){return e.common.isPopupActive};var j=function(e){var t=e.className,a=void 0===t?"":t,n=e.modifiers,r=void 0===n?[]:n,o=e.onClick,i=void 0===o?function(){}:o,l=e.text,u=void 0===l?null:l,m=e.iconType,d=void 0===m?null:m,f=e.type,p=void 0===f?"button":f,v=Object(s.c)(g);return c.a.createElement("button",{type:p,className:"".concat(a," ").concat("Button"," ").concat(h("Button",r)," ").concat(v?"".concat("Button","_disabled"):""),onClick:i},d&&c.a.createElement(N,{className:"".concat("Button","-Icon"),modifiers:[["type",d]]}),u&&c.a.createElement("div",{className:"".concat("Button","-Text")},u))};a(46);var C=function(e){var t="WithoutConfiguration",a=e.className,n=void 0===a?"":a,r=e.modifiers,o=void 0===r?[]:r,i=e.actionFn;return c.a.createElement("main",{className:"".concat(n," ").concat(t," ").concat(h(t,o))},c.a.createElement("div",{className:"".concat(t,"-Content")},c.a.createElement(N,{className:"".concat(t,"-Logo"),modifiers:[["type","settingsLogo"]]}),c.a.createElement("div",{className:"".concat(t,"-Description Text")},"Configure repository connection and synchronization settings"),c.a.createElement(j,{className:"".concat(t,"-Button"),modifiers:[["color","accent"]],onClick:i,text:"Open settings"})))},T=(a(47),function(e){return{type:"TOGGLE_PROGRESS",payload:e}}),I=function(e){return{type:"POPUP",payload:e}},k=a(3),_=a.n(k),L=a(5),B=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n){var c=new URL("".concat(f,"/builds"));return c.search=new URLSearchParams(t).toString(),console.log("fetchBuilds: ",c),fetch(c).then((function(e){return e.json()})).then(function(){var c=Object(L.a)(_.a.mark((function c(r){var o;return _.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(o=r.data,!r.error){c.next=9;break}if(!(++a<10)){c.next=7;break}return c.next=6,new Promise((function(e){return setTimeout(e,1e3)}));case 6:return c.abrupt("return",e(t,a)(n));case 7:c.next=10;break;case 9:n({type:"FETCH_BUILDS",payload:o});case 10:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}())}},F=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(c){return console.log("fetchDetails: ",t),fetch("".concat(f,"/builds/").concat(t)).then((function(e){return e.json()})).then(function(){var r=Object(L.a)(_.a.mark((function r(o){var i;return _.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=o.data,!o.error){r.next=9;break}if(!(++a<10)){r.next=7;break}return r.next=6,new Promise((function(e){return setTimeout(e,1e3)}));case 6:return r.abrupt("return",e(t,a,n)(c));case 7:return n&&v.push("/"),r.abrupt("return",null);case 9:if(!n){r.next=13;break}c({type:"DETAILS_BUILD",payload:i}),r.next=14;break;case 13:return r.abrupt("return",i);case 14:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())}},w=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(c){return console.log("fetchLog: ",t),fetch("".concat(f,"/builds/").concat(t,"/logs")).then((function(e){return e.json()})).then(function(){var r=Object(L.a)(_.a.mark((function r(o){return _.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!o.error){r.next=8;break}if(!(++a<10)){r.next=6;break}return r.next=5,new Promise((function(e){return setTimeout(e,1e3)}));case 5:return r.abrupt("return",e(t,a,n)(c));case 6:return n&&v.push("/"),r.abrupt("return",null);case 8:if(!n){r.next=12;break}c({type:"LOG_BUILD",payload:o}),r.next=13;break;case 12:return r.abrupt("return",o);case 13:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())}},S=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n){return console.log("try to add build by commit: ",t),n(T(!0)),fetch("".concat(f,"/builds/").concat(t),{method:"POST"}).then((function(e){return e.json()})).then(function(){var c=Object(L.a)(_.a.mark((function c(r){var o;return _.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(o=r.data,!r.error){c.next=10;break}if(!(++a<10)){c.next=7;break}return c.next=6,new Promise((function(e){return setTimeout(e,1e3)}));case 6:return c.abrupt("return",e(t,a)(n));case 7:return n(T(!1)),n(I(!1)),c.abrupt("return",null);case 10:n({type:"DETAILS_BUILD",payload:{}}),n({type:"NEW_BUILD_ID",payload:o.id}),n(T(!1)),n(I(!1)),v.push("/build/".concat(o.id));case 15:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}())}},D=a(24),P={data:[],details:null,log:null,newBuildId:null},H=function(e){return e.builds.data},R=function(e){return e.builds.details},M=function(e){return e.builds.log},U=function(e){return e.builds.newBuildId};var G=function(e){var t=e.className,a=void 0===t?"":t,n=e.modifiers,r=void 0===n?[]:n,o=e.title,i=void 0===o?{text:!1,modifiers:[]}:o,d=e.buttons,p=void 0===d?[]:d,b=Object(s.b)(),N=Object(s.c)(R);return c.a.createElement("header",{className:"".concat(a," ").concat("Header"," ").concat(h("Header",r))},c.a.createElement("div",{className:"".concat("Header","-Content")},i.text&&c.a.createElement("div",{className:"".concat("Header","-Title Text ").concat(h("Text",i.modifiers))},i.text),p.length>0&&c.a.createElement("div",{className:"".concat("Header","-ButtonsBlock")},p.map((function(e,t){var a,n=e.modifiers,r=e.onClick,o=e.text,i=e.iconType;switch(r){case l:a=function(){return v.push("/settings")};break;case u:a=function(){b(I(!0))};break;case m:a=function(){b(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n){return console.log("try to rebuild build by commit: ",t),n(T(!0)),fetch("".concat(f,"/builds/").concat(t),{method:"POST"}).then((function(e){return e.json()})).then(function(){var c=Object(L.a)(_.a.mark((function c(r){var o;return _.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(o=r.data,!r.error){c.next=9;break}if(!(++a<10)){c.next=7;break}return c.next=6,new Promise((function(e){return setTimeout(e,1e3)}));case 6:return c.abrupt("return",e(t,a)(n));case 7:return n(T(!1)),c.abrupt("return",null);case 9:n({type:"DETAILS_BUILD",payload:{}}),n({type:"NEW_BUILD_ID",payload:o.id}),n(T(!1)),v.push("/build/".concat(o.id));case 13:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}())}}(N.commitHash))}}return c.a.createElement(j,{key:t,className:"".concat("Header","-Button"),modifiers:n,onClick:a,text:o,iconType:i})})))))};var A=function(e){var t=e.className,a=void 0===t?"":t,r=e.modifiers,o=void 0===r?[]:r;return Object(n.useEffect)((function(){document.title=d}),[]),c.a.createElement(c.a.Fragment,null,c.a.createElement(G,{className:"Container-Header",title:{text:d,modifiers:[["type","headerTitle"]]},buttons:[{modifiers:[["type","control"],["icon","before"]],onClick:l,text:"Settings",iconType:"settings"}]}),c.a.createElement(C,{className:a,modifiers:o,actionFn:function(){return v.push("/settings")}}))},W=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n){return n(T(!0)),fetch("".concat(f,"/settings"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then(function(){var c=Object(L.a)(_.a.mark((function c(r){return _.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(!r.error){c.next=9;break}if(!(++a<10)){c.next=7;break}return c.next=6,new Promise((function(e){return setTimeout(e,1e3)}));case 6:return c.abrupt("return",e(t,a)(n));case 7:c.next=10;break;case 9:n({type:"SAVE_CONFIG",payload:t});case 10:n(T(!1)),v.goBack();case 12:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}())}},q=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n){return console.log("fetchSettings"),fetch("".concat(f,"/settings")).then((function(e){return e.json()})).then(function(){var c=Object(L.a)(_.a.mark((function c(r){var o;return _.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(o=r.data,!r.error){c.next=8;break}if(!(++t<10)){c.next=7;break}return c.next=6,new Promise((function(e){return setTimeout(e,1e3)}));case 6:return c.abrupt("return",e(t,a)(n));case 7:return c.abrupt("return",null);case 8:if(!a){c.next=12;break}n({type:"FETCH_CONFIG",payload:o}),c.next=13;break;case 12:return c.abrupt("return",o);case 13:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}())}};a(49);var z=function(e){var t=e.className,a=void 0===t?"":t,r=e.modifiers,o=void 0===r?[]:r,i=e.labelBefore,l=void 0===i?{text:!1,className:"",modifiers:[]}:i,u=e.labelAfter,m=void 0===u?{text:!1,className:"",modifiers:[]}:u,d=e.id,f=e.type,p=void 0===f?"text":f,v=e.placeholder,E=e.name,y=e.required,O=void 0!==y&&y,x=e.inputMode,j=e.value,C=void 0===j?"":j,T=e.pattern,I=e.forwardRef,k=o.filter((function(e){var t=Object(b.a)(e,2),a=t[0],n=t[1];return"clear"===a&&"visible"===n})).length>0,_=Object(n.useState)(C),L=Object(b.a)(_,2),B=L[0],F=L[1],w=Object(s.c)(g);return c.a.createElement(c.a.Fragment,null,l.text&&c.a.createElement("label",{htmlFor:d,className:"".concat(l.className," Text ").concat(h("Text",l.modifiers))},l.text),c.a.createElement("div",{className:"".concat(a," ").concat("Input"," ").concat(h("Input",o)," ").concat(w?"".concat("Input","_disabled"):"")},c.a.createElement("input",{id:d,className:"".concat("Input","-Control"),type:p,placeholder:v,name:E,required:O,onChange:function(e){return F(e.target.value)},value:B,inputMode:x,pattern:T,ref:I}),k&&c.a.createElement(N,{className:"".concat("Input","-ClearIcon"),modifiers:[["type","clear"]],onClick:function(){return F("")}})),m.text&&c.a.createElement("label",{htmlFor:d,className:"".concat(m.className," Text ").concat(h("Text",m.modifiers))},m.text))},J=(a(50),{config:{}}),V=function(e){return e.settings.config},$=function(e){return e.settings.config.repoName?e.settings.config.repoName:""},Y=function(e){return e.settings.config.buildCommand?e.settings.config.buildCommand:""},K=function(e){return e.settings.config.mainBranch?e.settings.config.mainBranch:""},Q=function(e){return e.settings.config.period?e.settings.config.period:"10"};var X=function(e){var t=e.className,a=void 0===t?"":t,r=e.modifiers,o=void 0===r?[]:r,i=Object(s.b)(),l=Object(n.useRef)(null),u=Object(n.useRef)(null),m=Object(n.useRef)(null),d=Object(n.useRef)(null),f=Object(s.c)($),p=Object(s.c)(Y),b=Object(s.c)(K),N=Object(s.c)(Q),E=function(){var e=Object(L.a)(_.a.mark((function e(t){var a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&t.preventDefault(),a={repoName:l.current.value,buildCommand:u.current.value,mainBranch:m.current.value,period:d.current.value},console.log("config: ",a),i(W(a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement("form",{className:"".concat(a," ").concat("Form"," ").concat(h("Form",o)),onSubmit:E},c.a.createElement("div",{className:"".concat("Form","-Content")},c.a.createElement("div",{className:"".concat("Form","-Item ").concat("Form","-Item_type_header")},c.a.createElement("div",{className:"".concat("Form","-Label Text Text_type_formHeader")},"Settings"),c.a.createElement("div",{className:"Text"},"Configure repository connection"," ",c.a.createElement("span",{className:"Text-NonBreakable"},"and synchronization settings"))),c.a.createElement("div",{className:"".concat("Form","-Item")},c.a.createElement(z,{className:"".concat("Form","-Input"),modifiers:[["clear","visible"]],labelBefore:{text:"GitHub repository",className:"".concat("Form","-Label ").concat("Form","-Label_type_required"),modifiers:[["type","formLabel"]]},id:"repository",type:"text",placeholder:"user-name/repo-name",name:"repository",required:!0,value:f,forwardRef:l})),c.a.createElement("div",{className:"".concat("Form","-Item")},c.a.createElement(z,{className:"".concat("Form","-Input"),modifiers:[["clear","visible"]],labelBefore:{text:"Build command",className:"".concat("Form","-Label"),modifiers:[["type","formLabel"]]},id:"command",type:"text",placeholder:"npm ci && npm run build",name:"command",required:!0,value:p,forwardRef:u})),c.a.createElement("div",{className:"".concat("Form","-Item")},c.a.createElement(z,{className:"".concat("Form","-Input"),modifiers:[["clear","visible"]],labelBefore:{text:"Main branch",className:"".concat("Form","-Label"),modifiers:[["type","formLabel"]]},id:"branch",type:"text",placeholder:"master",name:"branch",required:!0,value:b,forwardRef:m})),c.a.createElement("div",{className:"".concat("Form","-Item ").concat("Form","-Item_type_flat")},c.a.createElement(z,{className:"".concat("Form","-Input"),modifiers:[["size","small"],["align","right"]],labelBefore:{text:"Synchronize every",className:"".concat("Form","-Label"),modifiers:[]},labelAfter:{text:"minutes",className:"".concat("Form","-Label"),modifiers:[]},id:"minutes",type:"text",inputMode:"numeric",pattern:"^[0]*[1-9][\\d]*$",name:"minutes",required:!0,value:N,forwardRef:d})),c.a.createElement("div",{className:"".concat("Form","-Item")},c.a.createElement("div",{className:"".concat("Form","-ButtonsBlock")},c.a.createElement(j,{className:"".concat("Form","-Button"),modifiers:[["color","accent"]],text:"Save",type:"submit"}),c.a.createElement(j,{type:"button",className:"".concat("Form","-Button"),onClick:function(){v.goBack()},text:"Cancel"})))))};var Z=function(e){var t=e.className,a=void 0===t?"":t,r=e.modifiers,o=void 0===r?[]:r;return Object(n.useEffect)((function(){document.title="Settings | ".concat(d)}),[]),c.a.createElement(c.a.Fragment,null,c.a.createElement(G,{className:"Container-Header",title:{text:d,modifiers:[["type","headerTitle"]]}}),c.a.createElement(X,{className:a,modifiers:o}))},ee=a(11);a(51);var te=function(e){var t=e.className,a=void 0===t?"":t,r=e.modifiers,o=void 0===r?[]:r,i=e.buildNumber,s=e.commitMessage,l=void 0===s?"":s,u=e.branchName,m=void 0===u?"":u,d=e.commitHash,f=void 0===d?"":d,p=e.authorName,v=void 0===p?"":p,E=e.status,y=e.start,g=e.duration,O=e.to,x=void 0===O?"":O,j=Object(n.useState)({full:"",short:""}),C=Object(b.a)(j,2),T=C[0],I=C[1];Object(n.useEffect)((function(){if(y){var e=y.split("T"),t=Object(b.a)(e,2),a=t[0],n=t[1],c={"01":"\u044f\u043d\u0432","02":"\u0444\u0435\u0432\u0440","03":"\u043c\u0430\u0440\u0442","04":"\u0430\u043f\u0440","05":"\u043c\u0430\u0439","06":"\u0438\u044e\u043d\u044c","07":"\u0438\u044e\u043b\u044c","08":"\u0430\u0432\u0433","09":"\u0441\u0435\u043d\u0442",10:"\u043e\u043a\u0442",11:"\u043d\u043e\u044f\u0431",12:"\u0434\u0435\u043a"};I(function(e,t){var a=e.split("-"),n=Object(b.a)(a,3),r=n[0],o=n[1],i=n[2],s=t.split(":"),l=Object(b.a)(s,2),u=l[0],m=l[1],d=c[o];return{full:"".concat(i," ").concat(d," ").concat(r,", ").concat(u,":").concat(m),short:"".concat(i," ").concat(d,", ").concat(u,":").concat(m)}}(a,n))}}),[y]);var k=Object(n.useState)(""),_=Object(b.a)(k,2),L=_[0],B=_[1];function F(e,t){return e.length>t?e.slice(0,t-1)+"...":e}Object(n.useEffect)((function(){if(g){B(function(e){var t=Math.floor(e/60),a=e%60,n=t?"".concat(t," \u0447"):"",c=a?"".concat(a," \u043c\u0438\u043d"):"";return"".concat(n).concat(t&&a?" ":"").concat(c)}(g))}}),[g]);var w=Object(n.useState)(""),S=Object(b.a)(w,2),D=S[0],P=S[1];Object(n.useEffect)((function(){m&&P(F(m,15))}),[m]);var H=Object(n.useState)(""),R=Object(b.a)(H,2),M=R[0],U=R[1];Object(n.useEffect)((function(){v&&U(F(v,15))}),[v]);var G=Object(n.useState)(""),A=Object(b.a)(G,2),W=A[0],q=A[1];Object(n.useEffect)((function(){f&&q(f.slice(0,7))}),[f]);var z=x?ee.a:"div";return c.a.createElement(z,{className:"".concat(a," ").concat("Card"," ").concat(h("Card",o)),to:x},c.a.createElement("div",{className:"".concat("Card","-Content")},c.a.createElement(N,{className:"".concat("Card","-Icon"),modifiers:[["type",E]]}),c.a.createElement("div",{className:"".concat("Card","-DataWrapper")},c.a.createElement("div",{className:"".concat("Card","-Data")},c.a.createElement("div",{className:"".concat("Card","-DataTitle")},c.a.createElement("div",{className:"".concat("Card","-Number")},"#",i),c.a.createElement("div",{className:"".concat("Card","-CommitName Text Text_type_commit")},l)),c.a.createElement("div",{className:"".concat("Card","-DataOther")},c.a.createElement("div",{className:"".concat("Card","-OtherInfo")},c.a.createElement(N,{className:"".concat("Card","-OtherIcon"),modifiers:[["type","branch"]]}),c.a.createElement("div",{className:"".concat("Card","-OtherText Text Text_type_card")},D),c.a.createElement("div",{className:"".concat("Card","-OtherText ").concat("Card","-OtherText_type_hash Text Text_type_card")},W)),c.a.createElement("div",{className:"".concat("Card","-OtherInfo")},c.a.createElement(N,{className:"".concat("Card","-OtherIcon"),modifiers:[["type","user"]]}),c.a.createElement("div",{className:"".concat("Card","-OtherText Text Text_type_card")},M)))),c.a.createElement("div",{className:"".concat("Card","-TimeBlock")},c.a.createElement("div",{className:"".concat("Card","-TimeItem ").concat(T.short?"":"".concat("Card","-TimeItem_hidden"))},c.a.createElement(N,{className:"".concat("Card","-TimeIcon"),modifiers:[["type","calendar"]]}),c.a.createElement("div",{className:"".concat("Card","-TimeText Text Text_type_card"),title:T.full||""},T.short||"")),c.a.createElement("div",{className:"".concat("Card","-TimeItem ").concat(L?"":"".concat("Card","-TimeItem_hidden"))},c.a.createElement(N,{className:"".concat("Card","-TimeIcon"),modifiers:[["type","stopwatch"]]}),c.a.createElement("div",{className:"".concat("Card","-TimeText Text Text_type_card")},L||""))))))};a(53);var ae=function(e){var t=e.className,a=void 0===t?"":t,r=e.modifiers,o=void 0===r?[]:r,i=Object(s.c)(H),l=Object(s.b)();Object(n.useEffect)((function(){l(B({limit:10}))}),[]);var u=Object(n.useCallback)((function(){return l(function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n){n(T(!0));var c=new URL("".concat(f,"/builds"));return c.search=new URLSearchParams(t).toString(),console.log("fetchMoreBuilds: ",c),fetch(c).then((function(e){return e.json()})).then(function(){var c=Object(L.a)(_.a.mark((function c(r){var o;return _.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(o=r.data,!r.error){c.next=9;break}if(!(++a<10)){c.next=7;break}return c.next=6,new Promise((function(e){return setTimeout(e,1e3)}));case 6:return c.abrupt("return",e(t,a)(n));case 7:c.next=10;break;case 9:n({type:"FETCH_MORE_BUILDS",payload:o});case 10:n(T(!1));case 11:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}())}}({limit:10,offset:i.length}))}),[i.length]);return c.a.createElement("main",{className:"".concat(a," ").concat("BuildList"," ").concat(h("BuildList",o))},c.a.createElement("div",{className:"".concat("BuildList","-Content")},i.map((function(e){var t,a=e.status,n=e.id,r=e.buildNumber,o=e.commitMessage,i=e.branchName,s=e.commitHash,l=e.authorName,u=e.start,m=e.duration;switch(a){case"InProgress":case"Waiting":t="progress";break;case"Success":t="done";break;case"Fail":case"Canceled":default:t="fail"}return c.a.createElement(te,{className:"".concat("BuildList","-Item"),modifiers:[["type",t]],to:"/build/".concat(n),buildNumber:r,commitMessage:o,branchName:i,commitHash:s,authorName:l,start:u,duration:m,key:n,status:t})})),c.a.createElement(j,{className:"".concat("BuildList","-Button"),modifiers:[["type","controlExtended"]],text:"Show more",onClick:u})))};var ne=function(e){var t=e.className,a=void 0===t?"":t;Object(n.useEffect)((function(){document.title="Build history | ".concat(d)}),[]);var r=Object(s.c)(V);return c.a.createElement(c.a.Fragment,null,c.a.createElement(G,{className:"Container-Header",title:{text:r.repoName,modifiers:[["type","repositoryName"]]},buttons:[{modifiers:[["type","control"],["icon","before"]],onClick:u,text:"Run build",iconType:"play"},{modifiers:[["type","control"],["icon","only"]],onClick:l,iconType:"settings"}]}),c.a.createElement(ae,{className:a}))};a(54);var ce=function(e){var t=e.className,a=void 0===t?"":t,n=e.modifiers,r=void 0===n?[]:n,o=e.logString,i=void 0===o?"":o;return c.a.createElement("pre",{className:"".concat(a," ").concat("BuildLog"," ").concat(h("BuildLog",r)),dangerouslySetInnerHTML:{__html:i}})};a(55),a(56);var re=function(){return c.a.createElement("div",{className:"Loader"},c.a.createElement("div",{className:"Loader-SpinerWrapper"},c.a.createElement("div",{className:"Loader-Spiner"})))},oe=a(31),ie=a.n(oe);var se=function(e){var t=e.className,a=void 0===t?"":t,r=e.modifiers,o=void 0===r?[]:r,l=Object(i.g)().buildId,u=Object(s.c)(H),m=Object(s.c)(U),d=Object(s.c)(R),f=Object(s.c)(M),p=Object(n.useState)(""),N=Object(b.a)(p,2),E=N[0],y=N[1],g=new ie.a({fg:"#000",bg:"#000"}),O=Object(s.b)();Object(n.useEffect)((function(){m===l||u.some((function(e){return e.id===l}))?O(function(e){return function(){var t=Object(L.a)(_.a.mark((function t(a){var n,c,r,o;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(T(!0)),t.next=3,Promise.all([F(e)(a),w(e)(a)]);case 3:if(n=t.sent,c=Object(b.a)(n,2),r=c[0],null!==(o=c[1])&&null!==r){t.next=11;break}return a(T(!1)),v.push("/"),t.abrupt("return",null);case 11:a({type:"LOG_BUILD",payload:o}),a({type:"DETAILS_BUILD",payload:r}),a(T(!1));case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(l)):v.push("/")}),[l,u,m]),Object(n.useEffect)((function(){y(g.toHtml(f||""))}),[f,g]);var x=Object(n.useState)(""),j=Object(b.a)(x,2),C=j[0],I=j[1];return Object(n.useEffect)((function(){if(d){var e;switch(d.status){case"InProgress":case"Waiting":e="progress";break;case"Success":e="done";break;case"Fail":case"Canceled":default:e="fail"}I(e)}}),[d]),c.a.createElement("main",{className:"".concat(a," ").concat("BuildDetails"," ").concat(h("BuildDetails",o))},c.a.createElement("div",{className:"".concat("BuildDetails","-Content")},d&&d.id===l?c.a.createElement(c.a.Fragment,null,c.a.createElement(te,{className:"".concat("BuildDetails","-Item"),modifiers:[["type",C],["page","details"]],buildNumber:d.buildNumber,commitMessage:d.commitMessage,branchName:d.branchName,commitHash:d.commitHash,authorName:d.authorName,start:d.start,duration:d.duration,status:C}),E&&c.a.createElement(ce,{logString:E})):c.a.createElement(re,null)))};var le=function(e){var t=e.className,a=void 0===t?"":t;Object(n.useEffect)((function(){document.title="Build details | ".concat(d)}),[]);var r=Object(s.c)(V);return c.a.createElement(c.a.Fragment,null,c.a.createElement(G,{className:"Container-Header",title:{text:r.repoName,modifiers:[["type","repositoryName"]]},buttons:[{modifiers:[["type","control"],["icon","before"]],onClick:m,text:"Rebuild",iconType:"restart"},{modifiers:[["type","control"],["icon","only"]],onClick:l,iconType:"settings"}]}),c.a.createElement(se,{className:a}))};a(63);var ue=function(e){var t=e.className,a=void 0===t?"":t,n=e.modifiers,r=void 0===n?[]:n;return c.a.createElement("main",{className:"".concat(a," ").concat("NotFound"," ").concat(h("NotFound",r))},c.a.createElement("div",{className:"".concat("NotFound","-Content")},"Page not found. Error 404. ",c.a.createElement(ee.a,{to:"/"},"Go to home page"),"."))};var me=function(e){var t=e.className,a=void 0===t?"":t,r=e.modifiers,o=void 0===r?[]:r;return Object(n.useEffect)((function(){document.title="Page not found | ".concat(d)}),[]),c.a.createElement(c.a.Fragment,null,c.a.createElement(G,{className:"Container-Header",title:{text:d,modifiers:[["type","headerTitle"]]}}),c.a.createElement(ue,{className:a,modifiers:o}))};a(64),a(65);var de=function(e){var t=e.className,a=void 0===t?"":t,n=e.modifiers,r=void 0===n?[]:n;return c.a.createElement("footer",{className:"".concat(a," ").concat("Footer"," ").concat(h("Footer",r))},c.a.createElement("div",{className:"".concat("Footer","-Content")},c.a.createElement("div",{className:"".concat("Footer","-LinksWrapper")},c.a.createElement(ee.a,{to:"/support",className:"".concat("Footer","-Link MyLink MyLink_type_footer")},"Support"),c.a.createElement(ee.a,{to:"/learning",className:"".concat("Footer","-Link MyLink MyLink_type_footer")},"Learning")),c.a.createElement("div",{className:"".concat("Footer","-Credentional Text Text_type_footer")},"\xa9 2020 Your Name")))};a(66);var fe=function(e){var t=e.className,a=void 0===t?"":t,r=e.modifiers,o=void 0===r?[]:r,i=Object(s.b)(),l=Object(n.useRef)(null),u=function(){var e=Object(L.a)(_.a.mark((function e(t){var a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&t.preventDefault(),a=l.current.value.trim(),console.log("commitHash: ",a),i(S(a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement("div",{className:"Popup-Wrapper"},c.a.createElement("form",{className:"Popup ".concat(a," ").concat("Form"," ").concat(h("Form",o)),onSubmit:u},c.a.createElement("div",{className:"".concat("Form","-Content")},c.a.createElement("div",{className:"".concat("Form","-Header Text Text_type_popupHeader")},"New build"),c.a.createElement("div",{className:"".concat("Form","-Item")},c.a.createElement(z,{className:"".concat("Form","-Input"),modifiers:[["clear","visible"]],labelBefore:{text:"Enter the commit hash which you want to build.",className:"".concat("Form","-Label"),modifiers:[["type","formLabel"]]},id:"commit",type:"text",placeholder:"Commit hash",pattern:"\\S+",name:"commit",required:!0,value:"",forwardRef:l})),c.a.createElement("div",{className:"".concat("Form","-Item")},c.a.createElement("div",{className:"".concat("Form","-ButtonsBlock")},c.a.createElement(j,{className:"".concat("Form","-Button"),modifiers:[["color","accent"]],text:"Run build",type:"submit"}),c.a.createElement(j,{type:"button",className:"".concat("Form","-Button"),modifiers:[["color","transparent"]],onClick:function(){l.current.value="",i(I(!1))},text:"Cancel"}))))))};var pe=function(){var e=Object(s.c)(O),t=Object(s.c)(x),a=Object(s.c)(g),r=Object(s.c)(V),o=Object(s.b)();return Object(n.useEffect)((function(){o(function(){var e=Object(L.a)(_.a.mark((function e(t){var a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q()(t);case 2:if(null!==(a=e.sent)){e.next=5;break}return e.abrupt("return");case 5:if(!a.repoName){e.next=8;break}return e.next=8,B({limit:10})(t);case 8:t({type:"FETCH_CONFIG",payload:a}),t({type:"APP_LOADING",payload:!1});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[o]),Object(n.useEffect)((function(){var e=document.getElementById("root");t?e.classList.add("Container_popup_active"):e.classList.remove("Container_popup_active")}),[t]),Object(n.useEffect)((function(){var e=document.getElementById("root");a?e.classList.add("Container_inactive"):e.classList.remove("Container_inactive")}),[a]),c.a.createElement(c.a.Fragment,null,e?c.a.createElement(re,null):c.a.createElement(i.c,{history:v},c.a.createElement(i.d,null,c.a.createElement(i.b,{exact:!0,path:"/",render:function(){return r.repoName?c.a.createElement(ne,{className:"Container-Main"}):c.a.createElement(A,{className:"Container-Main"})}}),c.a.createElement(i.b,{path:"/build/:buildId",render:function(e){var t=e.location;return r.repoName?c.a.createElement(le,{className:"Container-Main"}):c.a.createElement(i.a,{to:{pathname:"/",state:{from:t}}})}}),c.a.createElement(i.b,{path:"/settings"},c.a.createElement(Z,{className:"Container-Main"})),c.a.createElement(i.b,{path:"*"},c.a.createElement(me,{className:"Container-Main"}))),c.a.createElement(de,{className:"Container-Footer"}),t&&c.a.createElement(fe,{modifiers:[["popup"]]})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ve=a(12),be=a(32),he=a(33),Ne=Object(ve.combineReducers)({common:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_PROGRESS":return Object(E.a)({},e,{isInProgress:t.payload});case"APP_LOADING":return Object(E.a)({},e,{isAppLoading:t.payload});case"POPUP":return Object(E.a)({},e,{isPopupActive:t.payload});default:return e}},settings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_CONFIG":var a=t.payload,n=a.repoName,c=a.buildCommand,r=a.mainBranch,o=a.period;return Object(E.a)({},e,{config:{repoName:n,buildCommand:c,mainBranch:r,period:o}});case"FETCH_CONFIG":return Object(E.a)({},e,{config:Object(E.a)({},t.payload)});default:return e}},builds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_BUILDS":return Object(E.a)({},e,{data:Object(D.a)(t.payload)});case"FETCH_MORE_BUILDS":for(var a=e.data[e.data.length-1],n=a?a.buildNumber:-1,c=[],r=0;r<t.payload.length;r++)t.payload[r].buildNumber>=n||c.push(t.payload[r]);return Object(E.a)({},e,{data:[].concat(Object(D.a)(e.data),c)});case"DETAILS_BUILD":return Object(E.a)({},e,{details:Object(E.a)({},t.payload)});case"LOG_BUILD":return Object(E.a)({},e,{log:t.payload});case"NEW_BUILD_ID":return Object(E.a)({},e,{newBuildId:t.payload});default:return e}}}),Ee=[be.a],ye=ve.applyMiddleware.apply(void 0,Ee),ge=Object(ve.createStore)(Ne,{},Object(he.composeWithDevTools)(ye)),Oe=document.getElementById("root");o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(s.a,{store:ge},c.a.createElement(pe,null))),Oe),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[34,1,2]]]);
//# sourceMappingURL=main.e79c069b.chunk.js.map